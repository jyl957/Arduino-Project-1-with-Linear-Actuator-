// This code is sent to Arduino 2


#include <Servo.h>

const byte cds = A0;          // A0 is connected to pin7(Output) of SR-Latch

Servo myservo;                // Create servo object to control the linear actuator
 
int pos = 0;                  // Variable to store the servo position
 
void setup() {
  
  Serial.begin (9600);
  myservo.attach(9);          // pin 9 is connected to orange wire(Control wire) of linear actuator

}
 
void loop() {


   int vala;
   int valb;
   int vald;
    vala = analogRead(cds);            // Determine the voltage from A0 pin
    delay(500); 
    valb = analogRead(cds);            // Determine the voltage from A0 pin after 500ms
    vald = valb - vala;                // Determine the difference between "vala" and "valb"
     Serial.println(vald);
     Serial.println(vala);
     Serial.println(valb);
     
           if(vald>300){               // If the vald is positive and larger than 300, it means that the output of SR-Latch is increased to HIGH voltage
     
  for (pos = 0; pos <= 90; pos += 1) { // The linear actuator goes from 0 degrees to 90 degrees
    // in steps of 1 degree
    myservo.write(pos);                // Tell linear actuator to go to position in variable 'pos'
  }


      }



       if(vald<-300){                  // If the vald is negative and smaller than -300, it means that the output of SR-Latch is decreased to LOW voltage
     
  for (pos = 90; pos >= 0; pos -= 1) { // The linear actuator goes from 90 degrees to 0 degrees
    myservo.write(pos);              

  }

 }
     
 }
